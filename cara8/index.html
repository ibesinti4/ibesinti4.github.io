<html>
  <head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.11.2/p5.min.js" integrity="sha512-1YMgn4j8cIL91s14ByDGmHtBU6+F8bWOMcF47S0cRO3QNm8SKPNexy4s3OCim9fABUtO++nJMtcpWbINWjMSzQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.11.2/addons/p5.sound.min.js" integrity="sha512-WzkwpdWEMAY/W8WvP9KS2/VI6zkgejR4/KTxTl4qHx0utqeyVE0JY+S1DlMuxDChC7x0oXtk/ESji6a0lP/Tdg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  </head>
  <body>
    <script>
      let t= 0;
let mic;
      let temblar;
      let sinus;//creem una variable que es diu sinus
      function setup() {
  createCanvas(windowWidth,windowHeight);
        mic=new p5.AudioIn();// guarda a la variable mic una entrada de audio de p5.js
        mic.start();// activa el microfon
}
function draw() {
  t += 0.01;
        // Incrementa la variable 't' per fer que el 'noise()' canviï progressivament.
       let noise1 =  noise(t) *  100;
  // Calcula la posició X del centre de la cara.
        // width / 2: Posa el centre a la meitat de l'amplada del canvas.
        // noise(t): Funció 'noise' genera valors suaus entre 0 i 1, donant moviment orgànic.
        // * 100: Amplifica el moviment.
        // - 50: Centra el moviment al voltant de la posició original.

        let noise2 = noise(t + 100) * 100 ;
        // Calcula la posició Y del centre de la cara amb el mateix patró.
        // noise(t + 100): Utilitza un desplaçament (+100) perquè X i Y siguin independents.
  let noise3 = noise(t + 200) *255;
    temblar=random(10,50)
  sinus=sin(frameCount * 0.1);//la variable sinus crea numeros entre -1 i +1
  //frameCount esta contant els fotogrames i fa 60 a sinus per segon
  //això vol dir 60 numeros entre -1 i 1 ordenats per segon
  let movsinus=map(sinus,-1,1,0,255);
  //converteix els numeros entre -1 i +1 donaran numeros proporcionals
  let vol=mic.getLevel();
  let h=map(vol,0,1,0,400);
  background(71+h*4, 220+h*4, 83-h);//color de fons
  fill( 217, 190+h, 150);//color de cara);
  stroke(0,0,0)//;
  ellipse(mouseX,mouseY,250,300);//cara
  // el primer que hi ha entre parentesis es diu paràmatre i és la posicó x del centre de la cara 
  //windowWid/2significa que el centre de la cara coincideix amb el centre de la pantallla 
  //el segon paràmtre és la posició y o alçada
  //windowHeight/2 significa el centre de la cara en alçada y coencideix amb el centre de la cara 
  //el tercer paràmetre es la amplada de la cara 
  //el cuart es la alçada de la cara 
  //temblar esta sumat a l'amplada i l'alçads de la cara i canviara aleotoriament entre 10 i 50 pixels
  fill(0); // Color negro
        rectMode(CENTER);
        rect(mouseX,mouseY- 150,180,80); // Part superior
  fill(255,0,0)
        rect(mouseX,mouseY - 110,250,20); // Ala del sombreix
  fill(255+h*4, 255, 255)//color ulls
  ellipse(mouseX-60,mouseY-60,70,70);//ull dret
  ellipse(mouseX+60,mouseY-60,70,70);//ull esquerra
  fill(1,1,1)
  arc(mouseX,mouseY+90,100,90+h*6,0,PI);//boca
  fill(1+h*4, 1, 1 )//colors de pupil·la
  ellipse(mouseX-60,mouseY-60,20,20);//PUPILA dret
  ellipse(mouseX+60,mouseY-60,20,20);//PUPILA esquerra
  strokeWeigth(5);
  noFill();
  line(windowWidth/2-100,windowHeight/2-130,windowWidth/2-10,windowHeight/2-110);
  arc(mouseX,mouseY-130,80,90+h*6,0,PI,0);//
 console.log(h); 
}
    </script>
</body>
</html>
